#!/usr/bin/env python
import argparse
import farmfs
parser = argparse.ArgumentParser(description='Manage a farmfs instance.',)
parser.add_argument("--root", default='/tmp/vol')

verb_parsers = parser.add_subparsers()

mkdir_parser = verb_parsers.add_parser('mkfs')
mkdir_parser.set_defaults(verb=farmfs.mkfs)

writekey_parser = verb_parsers.add_parser("writekey")
writekey_parser.set_defaults(verb=farmfs.writekey)
writekey_parser.add_argument("key")
writekey_parser.add_argument("value")

readkey_parser = verb_parsers.add_parser("readkey")
readkey_parser.set_defaults(verb=farmfs.readkey)
readkey_parser.add_argument("key")

"""Builds a symlink farm out of a directory.
Looks at a the directory and turns all the
files into symlinks into the md5 sums of the files
under .farmfs/data"""

def main():
  args = parser.parse_args();
  args.verb(args)

if __name__ == "__main__":
  main()
